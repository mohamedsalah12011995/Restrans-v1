<div class="reportPage">

  <div class="loading" *ngIf="loading==true">

    <!--<img  src="../../../assets//img//loading1.gif" />-->

    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="211px" height="211px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
      <circle cx="50" cy="50" fill="none" stroke="#4164bd" stroke-width="10" r="34" stroke-dasharray="160.22122533307947 55.40707511102649" transform="rotate(89.4851 50 50)">
        <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="0.9345794392523364s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform>
      </circle>
      <!-- [ldio] generated by https://loading.io/ -->
    </svg>

  </div>

  <div class="repPageHeader">
    <h1>{{ 'ADMINSIDEBAR.TAXSREPORT' | translate }}</h1>
    <span>
      <a>
        <i class="fas fa-arrow-circle-left" (click)="navigateBack();"></i>
      </a>
    </span>
    <a>
      <button mat-button [matMenuTriggerFor]="menu"><i class="fas fa-print "></i></button>
      <mat-menu #menu="matMenu">
        <!--<button mat-menu-item (click)="ClickResizePaper('printInvA5')">A5</button>
        <button mat-menu-item (click)="ClickResizePaper('printInvA4')">A4</button>-->
        <button mat-menu-item>A5</button>
        <button mat-menu-item>A4</button>
        <button mat-menu-item (click)="exportAsXLSX()">exel</button>
      </mat-menu>
    </a>
    <a>
      <i class="fas fa-share"></i>
    </a>
  </div>
  <div class="repPageBody">
    <div class="repPageSearch">
      <div class="repPageSearchElement repPageSearchDate">
        <label class="hiden-in-small"> {{ 'LABELS.DATE' | translate }} </label>
        <mat-form-field appearance="outline">
          <mat-label> {{ 'REPORTS.FROM' | translate }} </mat-label>
          <input matInput type="date" [matDatepicker]="DateFrom" [(ngModel)]="fromDate">
          <mat-datepicker-toggle matSuffix [for]="DateFrom"></mat-datepicker-toggle>
          <mat-datepicker #DateFrom></mat-datepicker>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label> {{ 'REPORTS.TODATE' | translate }} </mat-label>
          <input matInput type="date" [matDatepicker]="DateTo" [(ngModel)]="toDate">
          <mat-datepicker-toggle matSuffix [for]="DateTo"></mat-datepicker-toggle>
          <mat-datepicker #DateTo></mat-datepicker>
        </mat-form-field>


        <button mat-stroked-button (click)="getBillsPagginated()" style="padding-top:5px"> {{ 'ACTIONS.SEARCH' | translate }} <i class="fas fa-search"></i></button>
        &nbsp;&nbsp;
        <mat-form-field appearance="outline">
          <mat-label> {{ 'ADMINSIDEBAR.TYPETAXS' | translate }} </mat-label>
          <mat-select [(ngModel)]="taxId">
            <mat-option [disabled]="true"> {{ 'ADMINSIDEBAR.TYPETAXS' | translate }} </mat-option>
            <mat-option *ngFor="let tax of taxesList" [value]="tax.id" (click)="FilterTax(tax)">
              {{ currentLang=='ar' ? tax.nameAr : tax.nameEn }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <!-- <div class="BtnResizePaper">
    <mat-icon>print</mat-icon>
    <button mat-stroked-button (click)="ClickResizePaper('printInvA5')">A5</button>
    <button mat-stroked-button (click)="ClickResizePaper('printInvA4')">A4</button>
    <button mat-stroked-button (click)="exportAsXLSX()"> exel </button>

  </div> -->
      </div>
    </div>

    <div class="repPageTable">
      <div class="repPageTable">
        <div class="row justify-content-center">
          <!-- <div class="col-md-5"> -->
          <!-- </div> -->
        </div>
        <div class="example-container mat-elevation-z8">
          <table class="table table-hover">
            <thead>
              <tr>
                <th> {{ 'ACTIONS.ID' | translate }} </th>
                <th> {{ 'REPORTTODAY.BILLNUMBER' | translate }}</th>
                <th> {{ 'REPORTTODAY.REQUESTNUMBER' | translate }} </th>
                <th> {{ 'LABELS.CLIENT' | translate }} </th>
                <th> {{ 'REPORTTODAY.QUANTITY' | translate }} </th>
                <th> {{ 'REPORTTODAY.TOTAL' | translate }}</th>
                <th> {{ 'LABELS.DISCOUNT' | translate }} </th>
                <th> {{ 'BILLINVOICE.SERVICEAX' | translate }} </th>
                <th> {{ 'LABELS.VAT' | translate }} </th>
                <th> {{ 'LABELS.PAID' | translate }}  </th>
                <th> {{ 'LABELS.REMAINING' | translate }}  </th>
                <th> {{ 'REPORTTODAY.NETTOTAL' | translate }}  </th>
                <th> {{ 'LABELS.DATE' | translate }}  </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let bill of filterbillList; let i = index;">
                <th scope="row">{{i+1}}</th>
                <td><span>{{bill.id}}</span></td>
                <td><span>{{bill.orderNo}}</span></td>
                <td><span>{{bill.pepoleName}}</span></td>
                <td><span>{{bill.totalQty}}</span></td>
                <td><span>{{bill.supTotal | number:'0.2-2'}}</span></td>
                <td><span>{{bill.currentDiscount}}</span></td>
                <td><span>{{bill.serviceFees | number:'0.2-2'}}</span></td>
                <td><span>{{bill.totalVatTax | number:'0.2-2'}}</span></td>
                <td><span>{{bill.paied | number:'0.2-2'}}</span></td>
                <td><span>{{bill.remaining | number:'0.2-2'}}</span></td>
                <td><span>{{bill.netTotal | number:'0.2-2'}}</span></td>
                <td><span>{{bill.currentDate | date: 'dd/MM/yyyy'}}</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="repAbstract hiden-in-small">
        <table>
          <thead>
            <tr>
              <th>
                {{ 'BILLREPORT.BILLTOTAL' | translate }}
              </th>
              <th>
                {{ 'LABELS.TOTALVAT' | translate }}
              </th>
              <th>
                {{ 'BILLREPORT.CASHCOUNT' | translate }}
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="tdCreditor"><span>{{ billTotals.sumBillNetTotals | number:'0.2-2' }}</span></td>
              <td class="tdMoney"><span>{{ billTotals.sumBillTotalVatTax | number:'0.2-2' }}</span></td>
              <td class="tdMoney"><span>{{ billTotals.sumBillCash | number:'0.2-2' }}</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<div class="printableInv" id="printReptax" hidden>
  <div [class]="ResizePaper">
    <div class="printInvDetails">
      <div class="row">
        <div class="printInvDetailsAddress">
          <div class="PrintCompanyName">
            <h1> {{ 'BRANCHES.COMPANYNAME' | translate }} </h1>
          </div>
          <div class="PrintLogo">
            <img src="../../../../assets/img/Logo4.png" alt="Logo">
          </div>
        </div>
        <div class="PrintName text-center">
          <h2> {{ 'ADMINSIDEBAR.TAXSREPORT' | translate }} </h2>
        </div>
        <div class="PrintDate">
          <!-- <h3>التاريخ</h3> -->
          <p>{{ 'REPORTS.FROM' | translate }}: <strong>{{fromDate | date: 'yyyy-MM-dd'}}</strong></p>
          <p>{{ 'REPORTS.TO' | translate }}: <strong>{{toDate | date: 'yyyy-MM-dd'}}</strong></p>
        </div>
        <div class="PrintSearchType" *ngIf="objectTax.nameAr != ''">
          <p> {{ 'ADMINSIDEBAR.TYPETAXS' | translate }} : <strong>{{objectTax.nameAr}}</strong></p>
        </div>
      </div>
    </div>
    <div class="printInvTable text-center">
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th> {{ 'REPORTTODAY.BILLNUMBER' | translate }}</th>
            <th> {{ 'REPORTTODAY.REQUESTNUMBER' | translate }} </th>
            <th> {{ 'LABELS.CLIENT' | translate }} </th>
            <th> {{ 'REPORTTODAY.QUANTITY' | translate }} </th>
            <th> {{ 'REPORTTODAY.TOTAL' | translate }}</th>
            <th> {{ 'LABELS.DISCOUNT' | translate }} </th>
            <th> {{ 'BILLINVOICE.SERVICEAX' | translate }} </th>
            <th> {{ 'LABELS.VAT' | translate }} </th>
            <th> {{ 'LABELS.PAID' | translate }}  </th>
            <th> {{ 'LABELS.REMAINING' | translate }}  </th>
            <th> {{ 'REPORTTODAY.NETTOTAL' | translate }}  </th>
            <th> {{ 'LABELS.DATE' | translate }}  </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let bill of filterbillList; let i=index">
            <td><span>{{i+1}}</span></td>
            <td><span>{{bill.id}}</span></td>
            <td><span>{{bill.orderNo}}</span></td>
            <td><span>{{bill.pepoleName}}</span></td>
            <td><span>{{bill.totalQty}}</span></td>
            <td><span>{{bill.supTotal | number:'0.2-2'}}</span></td>
            <td><span>{{bill.currentDiscount}}</span></td>
            <td><span>{{bill.serviceFees | number:'0.2-2'}}</span></td>
            <td><span>{{bill.totalVatTax | number:'0.2-2'}}</span></td>
            <td><span>{{bill.paied | number:'0.2-2'}}</span></td>
            <td><span>{{bill.remaining | number:'0.2-2'}}</span></td>
            <td><span>{{bill.netTotal | number:'0.2-2'}}</span></td>
            <td><span>{{bill.currentDate | date: 'dd/MM/yyyy'}}</span></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="repAbstract">
      <table>
        <thead>
          <tr>
            <th>
              {{ 'BILLREPORT.BILLTOTAL' | translate }}
            </th>
            <th>
              {{ 'LABELS.TOTALVAT' | translate }}
            </th>
            <th>
              {{ 'BILLREPORT.CASHCOUNT' | translate }}
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="tdCreditor"><span>{{ billTotals.sumBillNetTotals | number:'0.2-2' }}</span></td>
            <td class="tdMoney"><span>{{ billTotals.sumBillTotalVatTax | number:'0.2-2' }}</span></td>
            <td class="tdMoney"><span>{{ billTotals.sumBillCash | number:'0.2-2' }}</span></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="printInvFooter">
      <p>
        Power By Easacc<br />
        www.EasAcc.com
      </p>
    </div>
  </div>
</div>
