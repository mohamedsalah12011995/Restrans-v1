<div class="reportPage">

  <div class="loading" *ngIf="loading==true">

    <!--<img  src="../../../assets//img//loading1.gif" />-->

    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: none; display: block; shape-rendering: auto;" width="211px" height="211px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
      <circle cx="50" cy="50" fill="none" stroke="#4164bd" stroke-width="10" r="34" stroke-dasharray="160.22122533307947 55.40707511102649" transform="rotate(89.4851 50 50)">
        <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="0.9345794392523364s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform>
      </circle>
      <!-- [ldio] generated by https://loading.io/ -->
    </svg>

  </div>

  <div>
    <div class="repPageHeader">
      <h1>{{ 'ADMINSIDEBAR.APPLICATIONSREPORT' | translate }}</h1>
      <span>
        <a>
          <i class="fas fa-arrow-circle-left" (click)="navigateBack()"></i>
        </a>
      </span>
      <a>
        <button mat-button [matMenuTriggerFor]="menu"><i class="fas fa-print "></i></button>
        <mat-menu #menu="matMenu">
          <!--<button mat-menu-item (click)="ClickResizePaper('printInvA5')">A5</button>
          <button mat-menu-item (click)="ClickResizePaper('printInvA4')">A4</button>-->
          <button mat-menu-item>A5</button>
          <button mat-menu-item>A4</button>
          <button mat-menu-item (click)="exportAsXLSX()">exel</button>
        </mat-menu>
      </a>
      <a>
        <i class="fas fa-share"></i>
      </a>
    </div>
  </div>
  <div class="repPageBody">
    <div class="repPageSearch">
      <div class="repPageSearchElement repPageSearchDate">
        <label class="hiden-in-small"> {{ 'LABELS.DATE' | translate }} </label>
        <mat-form-field appearance="outline">
          <mat-label> {{ 'REPORTS.FROM' | translate }}: </mat-label>
          <input matInput type="date" [matDatepicker]="DateFrom" [(ngModel)]="fromDate">
          <mat-datepicker-toggle matSuffix [for]="DateFrom"></mat-datepicker-toggle>
          <mat-datepicker #DateFrom></mat-datepicker>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label> {{ 'REPORTS.TODATE' | translate }} </mat-label>
          <input matInput type="date" [matDatepicker]="DateTo" [(ngModel)]="toDate">
          <mat-datepicker-toggle matSuffix [for]="DateTo"></mat-datepicker-toggle>
          <mat-datepicker #DateTo></mat-datepicker>
        </mat-form-field>

        <button mat-stroked-button (click)="getBillsPagginated()" style="padding-top:5px">  {{ 'ACTIONS.SEARCH' | translate }} <i class="fas fa-search"></i></button>
        &nbsp;&nbsp;
        <mat-form-field appearance="outline">
          <mat-label> {{ 'APPLICATIONS.APPLICATIONTYPE' | translate }} </mat-label>
          <mat-select [(ngModel)]="applicationId">
            <mat-option *ngFor="let app of applicationsList" [value]="app.id" (click)="FilterBillByDateAndByApplication()">
              {{  currentLang=='ar' ? app.nameAr : app.nameEn }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <!-- <div class="BtnResizePaper">
    <mat-icon>print</mat-icon>
    <button mat-stroked-button (click)="ClickResizePaper('printInvA5')">A5</button>
    <button mat-stroked-button (click)="ClickResizePaper('printInvA4')">A4</button>
    <button mat-stroked-button (click)="exportAsXLSX()"> exel </button>

  </div> -->
      </div>
    </div>
    <div class="repPageTable">
      <div class="example-container mat-elevation-z8">
        <table class="table table-hover">
          <thead>
            <tr>
              <th> {{ 'ACTIONS.ID' | translate }} </th>
              <th> {{ 'REPORTTODAY.BILLNUMBER' | translate }}</th>
              <th> {{ 'REPORTTODAY.REQUESTNUMBER' | translate }} </th>
              <th> {{ 'LABELS.CLIENT' | translate }} </th>
              <th> {{ 'REPORTTODAY.QUANTITY' | translate }} </th>
              <th> {{ 'REPORTTODAY.TOTAL' | translate }}</th>
              <th> {{ 'LABELS.DISCOUNT' | translate }} </th>
              <th> {{ 'BILLINVOICE.SERVICEAX' | translate }} </th>
              <th> {{ 'LABELS.VAT' | translate }} </th>
              <th> {{ 'LABELS.APPLICATONVALUE' | translate }} </th>
              <th> {{ 'BILLINVOICE.APPLICATIONNAME' | translate }}  </th>
              <th> {{ 'LABELS.PAID' | translate }}  </th>
              <th> {{ 'LABELS.REMAINING' | translate }}  </th>
              <th> {{ 'REPORTTODAY.NETTOTAL' | translate }}  </th>
              <th> {{ 'LABELS.DATE' | translate }}  </th>
              <!--<th>{{ 'REPORTTODAY.PRINT' | translate }} </th>
              <th>  {{ 'ACTIONS.EDIT' | translate }}</th>-->
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let bill of filterbillList; let i = index;">
              <th scope="row">{{i+1}}</th>
              <td><span>{{bill.id}}</span></td>
              <td><span>{{bill.orderNo}}</span></td>
              <td><span>{{bill.pepoleName}}</span></td>
              <td><span>{{bill.totalQty}}</span></td>
              <td><span>{{bill.supTotal | number:'0.2-2'}}</span></td>
              <td><span>{{bill.currentDiscount}}</span></td>
              <td><span>{{bill.serviceFees | number:'0.2-2'}}</span></td>
              <td><span>{{bill.totalVatTax | number:'0.2-2'}}</span></td>
              <td><span>{{bill.applicationValue | number:'0.2-2'}}</span></td>
              <td><span>{{bill.application.nameAr}}</span></td>
              <td><span>{{bill.paied | number:'0.2-2'}}</span></td>
              <td><span>{{bill.remaining | number:'0.2-2'}}</span></td>
              <td><span>{{bill.netTotal | number:'0.2-2'}}</span></td>
              <td><span>{{bill.date}}</span></td>
              <!--<td><span>{{bill.date | date: 'dd/MM/yyyy'}}</span></td>-->
              <!--<td>
                <button mat-icon-button aria-label="Example icon-button with a heart icon" (click)="printRow(bill)">
                </button>
              </td>
              <td>
                <button mat-icon-button aria-label="Example icon-button with a heart icon" [routerLink]="['../billInvoice/',bill.id]">
                </button>
              </td>-->

            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="repAbstract hiden-in-small">
      <table>
        <thead>
          <tr>
            <th> {{ 'BILLREPORT.BILLCOUNT' | translate }} </th>
            <th> {{ 'LABELS.TOTALAPPLICATION' | translate }} </th>
            <th> {{ 'BILLREPORT.BILLTOTAL' | translate }} </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="tdCount"><span>{{ billTotals.totalBillCount }}</span></td>
            <td class="tdCount"><span>{{ totalApplication }}</span></td>
            <td class="tdCreditor"><span>{{ billTotals.sumBillNetTotals | number:'0.2-2' }}</span></td>
          </tr>
        </tbody>
      </table>
    </div>


  </div>
</div>

<div class="printableInv" id="printReptax" hidden>
  <div [class]="ResizePaper">
    <div class="printInvDetails">
      <div class="row">
        <div class="printInvDetailsAddress">
          <div class="PrintCompanyName">
            <h1> {{ 'BRANCHES.COMPANYNAME' | translate }} : </h1>
          </div>
          <div class="PrintLogo">
            <img src="../../../../assets/img/Logo4.png" alt="Logo">
          </div>
        </div>
        <div class="PrintName text-center">
          <h2> {{ 'ADMINSIDEBAR.APPLICATIONSREPORT' | translate }} </h2>
        </div>
        <div class="PrintDate">
          <!-- <h3>التاريخ</h3> -->
          <p>{{ 'REPORTS.FROM' | translate }}: <strong>{{fromDate | date: 'yyyy-MM-dd'}}</strong></p>
          <p>{{ 'REPORTS.TO' | translate }}: <strong>{{toDate | date: 'yyyy-MM-dd'}}</strong></p>
        </div>
        <div class="PrintSearchType" *ngIf="AppName != ''">
          <p> {{ 'APPLICATIONS.APPLICATIONTYPE' | translate }}: <strong>{{AppName}}</strong></p>
        </div>
      </div>
    </div>
    <div class="printInvTable text-center">
      <table>
        <thead>
          <tr>
            <th> {{ 'REPORTTODAY.BILLNUMBER' | translate }}</th>
            <th> {{ 'REPORTTODAY.REQUESTNUMBER' | translate }} </th>
            <th> {{ 'LABELS.CLIENT' | translate }} </th>
            <th> {{ 'REPORTTODAY.QUANTITY' | translate }} </th>
            <th> {{ 'REPORTTODAY.TOTAL' | translate }}</th>
            <th> {{ 'LABELS.DISCOUNT' | translate }} </th>
            <th> {{ 'BILLINVOICE.SERVICEAX' | translate }} </th>
            <th> {{ 'LABELS.VAT' | translate }} </th>
            <th> {{ 'BILLINVOICE.APPLICATIONNAME' | translate }}  </th>
            <th> {{ 'LABELS.PAID' | translate }}  </th>
            <th> {{ 'LABELS.REMAINING' | translate }}  </th>
            <th> {{ 'REPORTTODAY.NETTOTAL' | translate }}  </th>
            <th> {{ 'LABELS.DATE' | translate }}  </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let bill of filterbillList">
            <td><span>{{bill.id}}</span></td>
            <td><span>{{bill.orderNo}}</span></td>
            <td><span>{{bill.pepoleName}}</span></td>
            <td><span>{{bill.totalQty}}</span></td>
            <td><span>{{bill.supTotal | number:'0.2-2'}}</span></td>
            <td><span>{{bill.currentDiscount}}</span></td>
            <td><span>{{bill.serviceFees | number:'0.2-2'}}</span></td>
            <td><span>{{bill.totalVatTax | number:'0.2-2'}}</span></td>
            <td><span>{{bill.application.nameAr}}</span></td>
            <td><span>{{bill.paied | number:'0.2-2'}}</span></td>
            <td><span>{{bill.remaining | number:'0.2-2'}}</span></td>
            <td><span>{{bill.netTotal | number:'0.2-2'}}</span></td>
            <td><span>{{bill.currentDate | date: 'dd/MM/yyyy'}}</span></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="repAbstract">
      <table>
        <thead>
          <tr>
            <th>
              {{ 'BILLREPORT.BILLCOUNT' | translate }}
            </th>
            <th>
              {{ 'BILLREPORT.BILLTOTAL' | translate }}
            </th>
            <th>
              {{ 'BILLREPORT.CASHCOUNT' | translate }}
            </th>
            <th>
              {{ 'BILLREPORT.VISATOTAL' | translate }}
            </th>
            <th>
              {{ 'BILLREPORT.AGELTOTAL' | translate }}
            </th>
            <th>
              {{ 'BILLREPORT.DICOUNTTOTAL' | translate }}
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="tdCount"><span>{{ billTotals.totalBillCount }}</span></td>
            <td class="tdCreditor"><span>{{ billTotals.sumBillNetTotals | number:'0.2-2' }}</span></td>
            <td class="tdMoney"><span>{{ billTotals.sumBillCash | number:'0.2-2' }}</span></td>
            <td class="tdMoney"><span>{{ billTotals.sumBillVisa | number:'0.2-2' }}</span></td>
            <td class="tdMoney"><span>{{ billTotals.sumBillRemaining | number:'0.2-2' }}</span></td>
            <td class="tdDebtor"><span>{{ billTotals.totalDiscount | number:'0.2-2' }}</span></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="printInvFooter">
      <p>
        Power By Easacc<br />
        www.EasAcc.com
      </p>
    </div>
  </div>
</div>

<!-- <div class="printableInv printInvRoll" id="printbill" #printbill hidden="hidden">
  <div class="printInv text-right">
    <div class="printInvHeader">
      <div class="row">
        <div class="col-md-6">
          <div class="printInvHeaderLogo1">
            <label class="f-24">
              {{printablebill.orderNo}}
            </label>
          </div>
        </div>
        <div class="col-md-6">
          <div class="printInvHeaderLogo2">
            <img src="../../../assets/img/logo.png" width="126" height="68" alt="EasAcc" srcset="">
          </div>
        </div>
      </div>
    </div>
    <div class="printInvDetails">
      <div class="row">
        <div class="printInvDetailsAddress">
          <h1></h1>
        </div>
        <div class="col-md-5">
          <label>
            <strong>
              {{ 'REPORTTODAY.PEOPLE' | translate }}
            </strong>
            <span>{{printablebill.pepoleName}}</span>
          </label><br />
          <label>
            <strong>
              {{ 'REPORTTODAY.PHONE' | translate }}
            </strong>
            <span>-</span>
          </label><br />
        </div>
        <div class="col-md-7">
          <label>
            <strong>
              {{ 'REPORTTODAY.DATE' | translate }}
            </strong>
            <span>{{printablebill.date | date:'dd-MM-yyyy'}}</span>
          </label><br />
          <label>
            <strong>
              {{ 'REPORTTODAY.TIME' | translate }}


            </strong>
            <span>{{printablebill.date | date:'hh:mm aaa'}}</span>
          </label><br />
          <label>
            <strong>
              {{ 'REPORTTODAY.TABLENUMBER' | translate }}
            </strong>
            <span>{{printablebill.tableNo}}</span>
          </label>
        </div>
      </div>
      <div class="printInvTable text-center">
        <table>
          <thead>
            <tr>
              <th>     {{ 'LABELS.ITEMNAME' | translate }} </th>
              <th>   {{ 'LABELS.QUANTITY' | translate }} </th>
              <th>{{ 'LABELS.SellPrice' | translate }} </th>
              <th>  {{ 'LABELS.VAT' | translate }} </th>
              <th>{{ 'LABELS.TOTAL' | translate }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let billdetail of printablebill.billDetails; let i=index" id="billdetail{{i+1}}">
              <td> {{billdetail.item.nameAR}} - ({{billdetail.itemPrice.itemSize.sizeNameAr}})</td>
              <td>{{billdetail.qty}}</td>
              <td>{{billdetail.itemSellPrice | number:'0.2-2'}}</td>
              <td>{{billdetail.vatTax | number:'0.2-2'}}</td>
              <td>{{billdetail.totalAfterVatTax | number:'0.2-2'}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="printInvSum">
        <div class="row">
          <div class="col-md-6">
            <label>
              <strong>عدد القطع</strong>
              <span>{{printablebill.totalQty}}</span>
            </label>
            <label>
              <strong>{{ 'LABELS.PAID' | translate }}</strong>
              <span>{{printablebill.paied}}</span>
            </label>
            <label>
              <strong>  {{ 'LABELS.REMAINING' | translate }}</strong>
              <span>{{printablebill.remaining}}</span>
            </label>
          </div>
          <div class="col-md-6">
            <label>
              <strong>{{ 'LABELS.TOTALVAT' | translate }}</strong>
              <span>{{printablebill.supTotal}}</span>
            </label>
            <label>
              <strong>

                {{ 'LABELS.DISCOUNT' | translate }}
              </strong>
              <span>{{printablebill.descountValue}}</span>
            </label>
            <label>
              <strong>
                {{ 'LABELS.PAYMENTTYPE' | translate }}
              </strong>
              <span>{{printablebill.paymentType.nameAR}}</span>
            </label>
          </div>
          <div class="col-md-12">
            <h3>
              <label>
                {{ 'LABELS.NETTOTAL' | translate }}
              </label>
              <span>{{printablebill.netTotal}}</span>
            </h3>
          </div>
        </div>
      </div>
      <div class="printInvFooter">
        <p>
          Power By Easacc<br />
          www.easacc.com
        </p>
      </div>
    </div>


  </div>
</div> -->
